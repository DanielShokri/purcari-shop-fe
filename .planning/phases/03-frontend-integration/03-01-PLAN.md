---
phase: 03-frontend-integration
plan: 01
type: execute
wave: 3
depends_on: [02-01, 02-02, 02-03, 02-04]
files_modified: [apps/storefront/main.tsx, apps/storefront/providers/index.tsx]
autonomous: true
must_haves:
  truths:
    - "ConvexAuthProvider replaces ApiProvider as the primary data source"
    - "The app continues to build and run without crashing"
  artifacts:
    - path: "apps/storefront/providers/ConvexAuthProvider.tsx"
      provides: "Convex client initialization"
---

<objective>
Configure the Storefront application to use Convex. This involves setting up the Convex client, the Auth provider, and replacing the top-level API providers.
</objective>

<execution_context>
@/Users/danielshmuel.mirshukri/.config/opencode/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@apps/storefront/main.tsx
@apps/storefront/package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install & Configure Convex Client</name>
  <files>apps/storefront/package.json, apps/storefront/providers/ConvexAuthProvider.tsx</files>
  <action>
    - Ensure `convex` and `@convex-dev/auth` are installed.
    - Create `apps/storefront/providers/ConvexAuthProvider.tsx` to wrap the app in `ConvexAuthProvider`.
    - Initialize `ConvexClient` using `import.meta.env.VITE_CONVEX_URL`.
  </action>
  <verify>Check package.json for dependencies and verify provider file exists.</verify>
  <done>Convex infrastructure is available in the storefront.</done>
</task>

<task type="auto">
  <name>Task 2: Inject Convex Provider into Main Entry</name>
  <files>apps/storefront/main.tsx</files>
  <action>
    - Update `apps/storefront/main.tsx` or the root provider component to include the new `ConvexAuthProvider`.
    - Temporarily keep the Redux/RTK provider if needed for other shared state, but prioritize Convex for data.
  </action>
  <verify>Build the storefront app and check for provider-related errors in console.</verify>
  <done>Storefront is ready to use Convex hooks.</done>
</task>

</tasks>

<verification>
Verify that the application still boots successfully and the Convex client is connected.
</verification>

<success_criteria>
Storefront app starts with Convex client initialized.
</success_criteria>

<output>
After completion, create `.planning/phases/03-frontend-integration/03-01-SUMMARY.md`
</output>
