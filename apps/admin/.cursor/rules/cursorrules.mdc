---
description: "Core project conventions for Hebrew RTL admin dashboard with React 19, Chakra UI, and TypeScript"
alwaysApply: true
---

# Hebrew Admin Dashboard - Project Rules

## AI Assistant Guidelines

**IMPORTANT**: When unsure about implementation details, API usage, or component behavior:
1. **DO NOT** attempt to fix issues through trial and error
2. **FIRST** use the Context7 MCP tools to fetch official documentation:
   - Use `mcp_context7_resolve-library-id` to find the library ID
   - Use `mcp_context7_query-docs` to get relevant documentation
3. **ALSO** use Chakra UI MCP tools for component-specific questions:
   - Use `mcp_chakra-ui_get_component_props` for component properties
   - Use `mcp_chakra-ui_get_component_example` for usage examples
4. **THEN** implement the solution based on official documentation

This prevents wasted iterations and ensures correct implementations from the start.

## Technology Stack

- **Framework**: React 19 with TypeScript
- **Build Tool**: Vite 6
- **UI Library**: Chakra UI v3 with Emotion
- **State Management**: Redux Toolkit with RTK Query
- **Routing**: React Router DOM v7 (HashRouter)
- **Forms**: React Hook Form
- **Backend**: Appwrite SDK (Cloud)
- **Charts**: Recharts

## Environment Configuration

- Use Vite environment variables with `VITE_` prefix
- Access via `import.meta.env.VITE_VARIABLE_NAME`
- Store in `.env.local` (gitignored), template in `.env.example`
- Required: `VITE_APPWRITE_ENDPOINT`, `VITE_APPWRITE_PROJECT_ID`

## TypeScript Conventions

- Use TypeScript for all files (`.ts`, `.tsx`)
- Prefer interfaces over types for object shapes
- Use enums for finite sets of values (e.g., `OrderStatus`, `UserRole`)
- Appwrite documents use `$id` as the identifier field
- Type files use `.types.ts` suffix

## Types Organization

Types are organized by domain in the `types/` directory:

| File | Contents |
|------|----------|
| `types/auth.types.ts` | `UserRole`, `UserStatus`, `AuthUser`, `User`, `mapAppwriteUserToUser()` |
| `types/products.types.ts` | `Product`, `Category`, `ProductStatus`, `CategoryStatus` |
| `types/orders.types.ts` | `Order`, `OrderDetails`, `OrderItem`, `OrderStatus` |
| `types/analytics.types.ts` | `AnalyticsSummary`, `TimeSeriesDataPoint`, `AnalyticsInterval` |
| `types/notifications.types.ts` | `Notification`, `NotificationType` |
| `types/coupons.types.ts` | `Coupon`, `CouponStatus`, `CouponDiscountType` |
| `types/common.types.ts` | `StatCardProps` |
| `types/index.ts` | Re-exports all types |

Import types from `@/types` or `../types` - the index file re-exports everything.

## Component Patterns

- Use functional components with `export default function ComponentName()`
- Define props inline for simple components: `{ prop }: { prop: Type }`
- Co-locate small sub-components in the same file
- Import React explicitly: `import React from 'react'`

## RTL (Right-to-Left) Guidelines

- HTML has `lang="he" dir="rtl"` set
- Use Hebrew for all UI labels and messages
- For LTR content (dates, emails, code), use `dir="ltr"` attribute
- Chart containers need `style={{ direction: 'ltr' }}`

## Hebrew Text Standards

- Error messages: `'שגיאה בהתחברות'`, `'שדה חובה'`
- Loading states: `'טוען נתונים...'`, `'טוען מוצרים...'`, `'טוען נתוני אנליטיקות...'`
- Confirmations: `'האם אתה בטוח שברצונך למחוק?'`
- Buttons: `'התחבר'`, `'שמור'`, `'ביטול'`, `'מחק'`, `'ערוך'`
- Analytics labels: `'צפיות היום'`, `'משתמשים פעילים יומי (DAU)'`, `'מוצרים פופולריים'`, `'שימור משתמשים'`

## Authentication & Security

- **Admin-only access**: Users must have `admin` label in Appwrite
- Admin check performed on login AND session restore
- No self-registration (admins created via Appwrite Console)
- No console.log/error/warn in production code
- Environment variables for all sensitive config

## File Organization

```
├── types/                   # Domain-specific type definitions
│   ├── index.ts             # Re-exports all types
│   ├── auth.types.ts        # Auth/User types
│   ├── products.types.ts    # Product/Category types
│   ├── orders.types.ts      # Order types
│   ├── analytics.types.ts   # Analytics types
│   ├── notifications.types.ts # Notification types
│   ├── coupons.types.ts     # Coupon types
│   └── common.types.ts      # Shared types
├── theme.ts                 # Chakra UI custom theme
├── components/
│   ├── ui/                  # Chakra provider & utilities
│   ├── shared/              # Reusable components
│   ├── layout-parts/        # Header, Sidebar
│   ├── products/            # Product components
│   ├── orders/              # Order components
│   ├── users/               # User components
│   ├── categories/          # Category components
│   ├── coupons/             # Coupon components
│   ├── analytics/           # Analytics charts
│   ├── notifications/       # Notification components
│   ├── search/              # Search components
│   ├── post-editor/         # Editor form components
│   └── dashboard/           # Dashboard widgets
├── pages/                   # Page components
├── services/
│   ├── appwrite.ts          # Appwrite client (uses env vars)
│   └── api/                 # RTK Query API slices
├── functions/               # Appwrite Cloud Functions
└── store.ts                 # Redux store
```

## Error Handling

- Silent fail for non-critical errors (localStorage)
- Return `{ error: message }` from RTK Query endpoints
- Display Hebrew error messages to users
- No console statements in production
